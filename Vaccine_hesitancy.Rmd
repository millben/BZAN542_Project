---
title: "R Notebook"
output: html_notebook
editor_options: 
  chunk_output_type: console
---


```{r}
Data1 <- read.csv("Vaccine_Hesitancy_for_COVID-19__County_and_local_estimates.csv")
Data1 <- Data1[,c(-2, -18, -20, -21)] # remove county and state boundary. 
dim(Data1)
names(Data1)
# Note: CVAC is a cumulative metric created by the CDC to demonstrate vaccine hesitancy. In short, it is the combination of the 3 variables describing vaccine hesitancy and a likely good candidate for our response. 
HESITANCY <- Data1[, c(-2, -6, -7)]
colnames(HESITANCY) <- c("FIPS", "E.Hesitant", "E.Hesitant/Unsure", "E.V.Hesitant", "CVAV", "CVAC.Cat", "Fully.Vax.6/10", "Hispanic", "Native", "Asian", "Black", "Hawaiian.Pacific", "White", "State")
head(HESITANCY)

# SVI index is a metric that the CDC combines based on 15 variables included in the "SVI" dataframe. 
Data2 <- read.csv("SVI2018_US_COUNTY.csv")
dim(Data2)
names(Data2) # Note: Each "E" variable is the estimate while each "M" variable is the margin of error. 
SVI <- Data2[, c(4, 5, 7, 8, 44, 46, 48, 50, 52, 54, 56, 58, 60, 62, 64, 66, 68, 70, 72)] # these describe the 15 variables as percentages. 
dim(SVI)
names(SVI)
head(SVI)
summary(SVI) # There are some incorrect data points i.e. Rio Arriba NM
# population density could be a good metric to add

which(SVI$EP_DISABL > 33.6) # there is a county in Kentucky with 33% disability. Further research showed it was one of the most unhealthy counties in the US. 
SVI[3047,]

HESITANCY <- merge(HESITANCY, SVI)
head(HESITANCY)


## we might want to look into a county / state level metric for government & company policy on vaccines. 
## we might also add religion and political demographics as other explanatory variables. 
## So far, this could be used to help us to better understand vaccine hesitancy. Great policy issue if we want to do an academic pub! How can we bring in a predictive element? 

```


